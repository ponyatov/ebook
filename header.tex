\documentclass[oneside]{book}

% paper layout
\usepackage[paperwidth=15cm,paperheight=10cm,margin=5mm]{geometry} % screen reading

% pdflatex options
\usepackage[unicode]{hyperref}
\newcommand{\email}[1]{\textless\href{mailto:#1}{#1}\textgreater}

% i18n and encodings
\usepackage[T1,T2A]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english,russian]{babel}
\usepackage{indentfirst}

% ifthen package used for extra hints later
\usepackage{ifthen}

\newcommand{\setdoclang}[1]{\def\doclang{#1}}
\setdoclang{en}

\newcommand{\en}[1]{\ifthenelse{\equal{\doclang}{en}}{#1}{}}
\newcommand{\ru}[1]{\ifthenelse{\equal{\doclang}{ru}}{#1}{}}

\newcommand{\titleen}[1]{\ifthenelse{\equal{\doclang}{en}}{\title{#1}}{}}
\newcommand{\titleru}[1]{\ifthenelse{\equal{\doclang}{ru}}{\title{#1}}{}}

% relative sectioning
\newcounter{relsecount}\setcounter{relsecount}{0}
\newcommand{\secup}{\addtocounter{relsecount}{1}}
\newcommand{\secdown}{\addtocounter{relsecount}{-1}}
\newcommand{\secrel}[1]{
	\ifthenelse{\equal{\value{relsecount}}{0}}{\chapter{#1}}{}
	\ifthenelse{\equal{\value{relsecount}}{-1}}{\section{#1}}{}
	\ifthenelse{\equal{\value{relsecount}}{-2}}{\subsection{#1}}{}
	\ifthenelse{\equal{\value{relsecount}}{-3}}{\subsubsection{#1}}{}
}
\newcommand{\secen}[1]{\ifthenelse{\equal{\doclang}{en}}{\secrel{#1}}{}}
\newcommand{\secru}[1]{\ifthenelse{\equal{\doclang}{ru}}{\secrel{#1}}{}}

% sources markup
\usepackage{verbatim}
\usepackage{dirtree}
\usepackage{listings}
\lstset{
extendedchars=true,inputencoding=utf8, % i18n
frame=single, % show frames around
numbers=left, numberstyle=\small,numbersep=1mm,% line numbering
tabsize=4, % tab style
keywordstyle=\color{blue}\texttt,
commentstyle=\color{magenta}\texttt,
showspaces=true
}

\usepackage{lstlangspice}\lstdefinestyle{SPICE}{language=SPICE}
\usepackage{lstlanggnumake}\lstdefinestyle{mk}{language=[GNU]Make}

% extra packages
\usepackage[pdftex]{graphicx} % graph illustrations
\usepackage{amssymb} % windows key


% software menu & keys
\usepackage[os=win]{menukeys} 
\newcommand{\winstart}{$\boxplus$}
\newcommand{\lms}{\keys{$\lhd$}}
\newcommand{\rms}{\keys{$\rhd$}}
\newcommand{\wcmd}[1]{\keys{\winstart+R}\ \directory{#1}}
\newcommand{\file}[1]{\textbf{\textsf{#1}}}
\newcommand{\checkbox}{$\boxtimes$}
\newcommand{\uncheckbox}{$\square$}

% shorts

\newcommand{\eclipse}{\textcircled{$\equiv$}\textsc{eclipse}}
\newcommand{\linux}{Linux}
\newcommand{\emlinux}{em\linux}

\newcommand{\ram}{\en{RAM}\ru{ОЗУ}}
\newcommand{\internet}{\en{Internet}\ru{Интернет}}

\newcommand{\term}[1]{\emph{#1}}

\newcommand{\raspi}{Raspberry Pi}

\newcommand{\cp}[1]{\footnote{\ \copyright\url{#1}}}